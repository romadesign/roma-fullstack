<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>5.- Creando nuestro primer (Article) POST | ROMACODE</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="y">
    <meta name="theme-color" content="#003189">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/roma-fullstack/assets/css/0.styles.88a17620.css" as="style"><link rel="preload" href="/roma-fullstack/assets/js/app.597ac0ff.js" as="script"><link rel="preload" href="/roma-fullstack/assets/js/2.3f4652b3.js" as="script"><link rel="preload" href="/roma-fullstack/assets/js/19.1a37fc83.js" as="script"><link rel="prefetch" href="/roma-fullstack/assets/js/10.e5b0c0c2.js"><link rel="prefetch" href="/roma-fullstack/assets/js/11.fe73249a.js"><link rel="prefetch" href="/roma-fullstack/assets/js/12.dd9c948b.js"><link rel="prefetch" href="/roma-fullstack/assets/js/13.c32b18e9.js"><link rel="prefetch" href="/roma-fullstack/assets/js/14.0d88fe13.js"><link rel="prefetch" href="/roma-fullstack/assets/js/15.06da0dec.js"><link rel="prefetch" href="/roma-fullstack/assets/js/16.18e030f8.js"><link rel="prefetch" href="/roma-fullstack/assets/js/17.20124216.js"><link rel="prefetch" href="/roma-fullstack/assets/js/18.22fdecee.js"><link rel="prefetch" href="/roma-fullstack/assets/js/20.62666232.js"><link rel="prefetch" href="/roma-fullstack/assets/js/21.58154950.js"><link rel="prefetch" href="/roma-fullstack/assets/js/22.d099f11c.js"><link rel="prefetch" href="/roma-fullstack/assets/js/23.074c3ffc.js"><link rel="prefetch" href="/roma-fullstack/assets/js/24.2dcda4ea.js"><link rel="prefetch" href="/roma-fullstack/assets/js/25.88bc144d.js"><link rel="prefetch" href="/roma-fullstack/assets/js/26.9d8cf484.js"><link rel="prefetch" href="/roma-fullstack/assets/js/27.947ea268.js"><link rel="prefetch" href="/roma-fullstack/assets/js/28.84de38de.js"><link rel="prefetch" href="/roma-fullstack/assets/js/29.ec2d940a.js"><link rel="prefetch" href="/roma-fullstack/assets/js/3.375264fa.js"><link rel="prefetch" href="/roma-fullstack/assets/js/30.a7285ad4.js"><link rel="prefetch" href="/roma-fullstack/assets/js/31.ffce1023.js"><link rel="prefetch" href="/roma-fullstack/assets/js/32.b9846abd.js"><link rel="prefetch" href="/roma-fullstack/assets/js/33.99dfdc7d.js"><link rel="prefetch" href="/roma-fullstack/assets/js/34.3d51baea.js"><link rel="prefetch" href="/roma-fullstack/assets/js/35.37bc914a.js"><link rel="prefetch" href="/roma-fullstack/assets/js/36.1c6081cb.js"><link rel="prefetch" href="/roma-fullstack/assets/js/37.4b02a31c.js"><link rel="prefetch" href="/roma-fullstack/assets/js/38.54b7ad60.js"><link rel="prefetch" href="/roma-fullstack/assets/js/39.a9bc9eb0.js"><link rel="prefetch" href="/roma-fullstack/assets/js/4.85f105cc.js"><link rel="prefetch" href="/roma-fullstack/assets/js/40.9413f1bd.js"><link rel="prefetch" href="/roma-fullstack/assets/js/41.b7439622.js"><link rel="prefetch" href="/roma-fullstack/assets/js/42.63e9cae9.js"><link rel="prefetch" href="/roma-fullstack/assets/js/43.c42ec85a.js"><link rel="prefetch" href="/roma-fullstack/assets/js/44.20ca0751.js"><link rel="prefetch" href="/roma-fullstack/assets/js/45.81148a0e.js"><link rel="prefetch" href="/roma-fullstack/assets/js/46.ad75822c.js"><link rel="prefetch" href="/roma-fullstack/assets/js/47.1e070332.js"><link rel="prefetch" href="/roma-fullstack/assets/js/48.07e9d4c9.js"><link rel="prefetch" href="/roma-fullstack/assets/js/49.846a561d.js"><link rel="prefetch" href="/roma-fullstack/assets/js/5.90a54b9f.js"><link rel="prefetch" href="/roma-fullstack/assets/js/50.97bf7808.js"><link rel="prefetch" href="/roma-fullstack/assets/js/51.88d0e863.js"><link rel="prefetch" href="/roma-fullstack/assets/js/52.c3b69e27.js"><link rel="prefetch" href="/roma-fullstack/assets/js/53.d0ecdff1.js"><link rel="prefetch" href="/roma-fullstack/assets/js/54.f996c15b.js"><link rel="prefetch" href="/roma-fullstack/assets/js/55.ee4815e9.js"><link rel="prefetch" href="/roma-fullstack/assets/js/56.83cf946c.js"><link rel="prefetch" href="/roma-fullstack/assets/js/57.dde0ff3b.js"><link rel="prefetch" href="/roma-fullstack/assets/js/58.c5004a54.js"><link rel="prefetch" href="/roma-fullstack/assets/js/59.4baf569b.js"><link rel="prefetch" href="/roma-fullstack/assets/js/6.f79a99d3.js"><link rel="prefetch" href="/roma-fullstack/assets/js/60.7a4ce42c.js"><link rel="prefetch" href="/roma-fullstack/assets/js/61.944b13c3.js"><link rel="prefetch" href="/roma-fullstack/assets/js/62.ac6b523a.js"><link rel="prefetch" href="/roma-fullstack/assets/js/7.c75d85e5.js"><link rel="prefetch" href="/roma-fullstack/assets/js/8.3a3bf5bc.js"><link rel="prefetch" href="/roma-fullstack/assets/js/9.643f3ba3.js">
    <link rel="stylesheet" href="/roma-fullstack/assets/css/0.styles.88a17620.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/roma-fullstack/" class="home-link router-link-active"><!----> <span class="site-name">ROMACODE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Lenguajes Menu" class="dropdown-title"><span class="title">Lenguajes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Lenguajes Menu" class="mobile-dropdown-title"><span class="title">Lenguajes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/php/" class="nav-link">
  Php
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/javascript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Bases de datos" class="dropdown-title"><span class="title">DataBase</span> <span class="arrow down"></span></button> <button type="button" aria-label="Bases de datos" class="mobile-dropdown-title"><span class="title">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/mysql/" class="nav-link">
  MySql
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/mongooo/" class="nav-link">
  MongoDb
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front end" class="dropdown-title"><span class="title">Front-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front end" class="mobile-dropdown-title"><span class="title">Front-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/vuejs/" class="nav-link">
  VueJs
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/reactjs/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/jquery/" class="nav-link">
  JQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Back end" class="dropdown-title"><span class="title">Back-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="Back end" class="mobile-dropdown-title"><span class="title">Back-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/laravel/" class="nav-link">
  Laravel
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Full stack" class="dropdown-title"><span class="title">Full Stack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Full stack" class="mobile-dropdown-title"><span class="title">Full Stack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/fullstack-mevn/" class="nav-link">
  MEVN STACK
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/fullstack-lanm/" class="nav-link router-link-active">
  LANM STACK
</a></li></ul></div></div><div class="nav-item"><a href="/roma-fullstack/github/" class="nav-link">
  GitHub
</a></div><div class="nav-item"><a href="https://romadesign.github.io/roma" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Lenguajes Menu" class="dropdown-title"><span class="title">Lenguajes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Lenguajes Menu" class="mobile-dropdown-title"><span class="title">Lenguajes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/php/" class="nav-link">
  Php
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/javascript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Bases de datos" class="dropdown-title"><span class="title">DataBase</span> <span class="arrow down"></span></button> <button type="button" aria-label="Bases de datos" class="mobile-dropdown-title"><span class="title">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/mysql/" class="nav-link">
  MySql
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/mongooo/" class="nav-link">
  MongoDb
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front end" class="dropdown-title"><span class="title">Front-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front end" class="mobile-dropdown-title"><span class="title">Front-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/vuejs/" class="nav-link">
  VueJs
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/reactjs/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/jquery/" class="nav-link">
  JQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Back end" class="dropdown-title"><span class="title">Back-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="Back end" class="mobile-dropdown-title"><span class="title">Back-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/laravel/" class="nav-link">
  Laravel
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Full stack" class="dropdown-title"><span class="title">Full Stack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Full stack" class="mobile-dropdown-title"><span class="title">Full Stack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/roma-fullstack/fullstack-mevn/" class="nav-link">
  MEVN STACK
</a></li><li class="dropdown-item"><!----> <a href="/roma-fullstack/fullstack-lanm/" class="nav-link router-link-active">
  LANM STACK
</a></li></ul></div></div><div class="nav-item"><a href="/roma-fullstack/github/" class="nav-link">
  GitHub
</a></div><div class="nav-item"><a href="https://romadesign.github.io/roma" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>fullstack-lanm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/roma-fullstack/fullstack-lanm/" aria-current="page" class="sidebar-link">Encuentra Repositorios full stack Laravel and NextJs</a></li><li><a href="/roma-fullstack/fullstack-lanm/install.html" class="sidebar-link">1.- Primeros pasos</a></li><li><a href="/roma-fullstack/fullstack-lanm/segundo-pasos.html" class="sidebar-link">2.- Creando nuestro primer model (Article)</a></li><li><a href="/roma-fullstack/fullstack-lanm/tercer-paso.html" class="sidebar-link">3.- Creando nuestro primer factory y Seed (Article)</a></li><li><a href="/roma-fullstack/fullstack-lanm/cuarto-paso.html" class="sidebar-link">4.- Creando nuestro primer Controller and Resource (Article)</a></li><li><a href="/roma-fullstack/fullstack-lanm/quinto-paso.html" class="sidebar-link">5.- Creando nuestro Frontend con Next Js</a></li><li><a href="/roma-fullstack/fullstack-lanm/realizar-post.html" aria-current="page" class="active sidebar-link">5.- Creando nuestro primer (Article) POST</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roma-fullstack/fullstack-lanm/realizar-post.html#backend" class="sidebar-link">Backend</a></li><li class="sidebar-sub-header"><a href="/roma-fullstack/fullstack-lanm/realizar-post.html#frontend-nextjs-install-useform-and-reactstrap" class="sidebar-link">Frontend NextJs install useForm() and reactstrap</a></li><li class="sidebar-sub-header"><a href="/roma-fullstack/fullstack-lanm/realizar-post.html#agrendo-una-imagen-backend" class="sidebar-link">Agrendo una imagen (Backend)</a></li><li class="sidebar-sub-header"><a href="/roma-fullstack/fullstack-lanm/realizar-post.html#agrendo-una-imagen-frontend" class="sidebar-link">Agrendo una imagen (Frontend)</a></li><li class="sidebar-sub-header"><a href="/roma-fullstack/fullstack-lanm/realizar-post.html#agregando-validaciones" class="sidebar-link">Agregando validaciones</a></li><li class="sidebar-sub-header"><a href="/roma-fullstack/fullstack-lanm/realizar-post.html#realizando-post-update-delete-middleware-csrf" class="sidebar-link">Realizando Post, Update, Delete Middleware CSRF</a></li></ul></li><li><a href="/roma-fullstack/fullstack-lanm/mostrar-articles.html" class="sidebar-link">6.- Editando, Eliminando nuestro article</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_5-creando-nuestro-primer-article-post"><a href="#_5-creando-nuestro-primer-article-post" class="header-anchor">#</a> 5.- Creando nuestro primer (Article) POST</h1> <p>Antes de comenzar tenemos que realizar algunas configuraciones que más adelante se explicara.</p> <ul><li>Nos dirigimos al archivo <code>app/Http/Middleware/VerifyCsrfToken.php</code> para agregar /api/*dentro de la $exceptmatriz. Debería verse algo como esto:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">protected</span> <span class="token variable">$except</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'/api/*'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://stackoverflow.com/questions/72096100/laravel-8-sanctum-api-csrf-token-mismatch-419-error-with-next-js-app" target="_blank" rel="noopener noreferrer">Desajustar opción CSRF<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="backend"><a href="#backend" class="header-anchor">#</a> Backend</h2> <ul><li>Para esto tenemos que ir al backend <code>app/Http/Controllers/ArticleController</code> en la parte <code>public function store()</code> tenemos que agregar algunas lineas</li></ul> <div class="language-php extra-class"><pre class="language-php"><code>        <span class="token comment">//Al crear un articulo tenemos que enviar tambien el token para capturar al usuario y poder realizar validaciones</span>
        <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">;</span>

        <span class="token comment">//verificar los datos que tienen que llegar desde el frontend</span>
        <span class="token variable">$article</span> <span class="token operator">=</span> <span class="token class-name static-context">Article</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">title</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'slug'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">slug</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'body'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">body</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'author_id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$user</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'Message'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'ok'</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'articles'</span> <span class="token operator">=&gt;</span> <span class="token variable">$article</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="frontend-nextjs-install-useform-and-reactstrap"><a href="#frontend-nextjs-install-useform-and-reactstrap" class="header-anchor">#</a> Frontend NextJs install useForm() and reactstrap</h2> <p>La versión es &quot;react-hook-form&quot;: &quot;^7.34.2&quot;,</p> <ul><li>Primero tenemos que realizar algunas instalaciones, en este caso utilizaremos librerías que se utiliza en casi todos los proyectos para ahora tiempo de muchas configuraciones.
Más adelante se realizará un POST sin librerias.</li></ul> <div class="language-npm extra-class"><pre class="language-text"><code>    npm install react-hook-form
    npm i bootstrap
    npm i reactstrap react react-dom
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">//importamos los paquetes instalados</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> Row<span class="token punctuation">,</span> Col<span class="token punctuation">,</span> FormGroup<span class="token punctuation">,</span> Label<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'reactstrap'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> useForm<span class="token punctuation">,</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hook-form'</span>
</code></pre></div><p>Ahora utilizamos las funciones</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">//capturamos las cookie del usuario logeado para enviar al backend</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> getCookie <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> token <span class="token operator">=</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

    <span class="token comment">//Register new article</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> handleSubmit<span class="token punctuation">,</span> control <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NEXT_PUBLIC_BACKEND_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/article</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token comment">//Enviando la cookie del usuario logeado para poder realizar validaciones antes de hacer un post nuevo</span>
					headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
				<span class="token comment">// router.push(&quot;/&quot;)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>En el formulario para realizar el post</p> <div class="language-js extra-class"><pre class="language-js"><code>        <span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>Controller
				name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">}</span>
				control<span class="token operator">=</span><span class="token punctuation">{</span>control<span class="token punctuation">}</span>
				render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token punctuation">{</span> onChange<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
				<span class="token operator">&lt;</span>Input
					type<span class="token operator">=</span><span class="token string">&quot;title&quot;</span>
					onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span>
					value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span>
					label<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
					<span class="token punctuation">)</span><span class="token punctuation">}</span>
			<span class="token operator">/</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>Controller
				name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;slug&quot;</span><span class="token punctuation">}</span>
				control<span class="token operator">=</span><span class="token punctuation">{</span>control<span class="token punctuation">}</span>
				render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token punctuation">{</span> onChange<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
				<span class="token operator">&lt;</span>Input
					type<span class="token operator">=</span><span class="token string">&quot;slug&quot;</span>
					onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span>
					value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span>
					label<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;slug&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
					<span class="token punctuation">)</span><span class="token punctuation">}</span>
			<span class="token operator">/</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>Controller
				name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">}</span>
				control<span class="token operator">=</span><span class="token punctuation">{</span>control<span class="token punctuation">}</span>
				render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token punctuation">{</span> onChange<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
				<span class="token operator">&lt;</span>Input
					type<span class="token operator">=</span><span class="token string">&quot;textarea&quot;</span>
					onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span>
					value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span>
					label<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
				<span class="token punctuation">)</span><span class="token punctuation">}</span>
			<span class="token operator">/</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Submit<span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p>Y así realizamos un nuevo article, ahora agreguemos una imagen</p> <h2 id="agrendo-una-imagen-backend"><a href="#agrendo-una-imagen-backend" class="header-anchor">#</a> Agrendo una imagen (Backend)</h2> <p>Para eso primero vamos a la parte del backend <code>migración del article</code> para agregar un nuevo campo para la imagen, en este caso guardaremos la imagen en formato Base64 que se almacenaría como un string.</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'articles'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'slug'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//campo image type text</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">longText</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'image'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreignId</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'author_id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">constrained</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>Ahora nos dirigimos a <code>app/Models/Article.php</code> para agregar el nuevo campo</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'title'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'slug'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'body'</span><span class="token punctuation">,</span>
        <span class="token comment">//new campo image</span>
        <span class="token string single-quoted-string">'image'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'author_id'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Ahora nos dirigimos a <code>app/Http/Controllers/Article.php</code> para agregar el nuevo campo</p> <div class="language-php extra-class"><pre class="language-php"><code>        <span class="token variable">$article</span> <span class="token operator">=</span> <span class="token class-name static-context">Article</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">title</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'slug'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">slug</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'body'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">body</span><span class="token punctuation">,</span>
            <span class="token comment">//new campo image</span>
            <span class="token string single-quoted-string">'image'</span> <span class="token operator">=&gt;</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">image</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'author_id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$user</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para finalizar realizamos una <code>migration</code></p> <div class="language- extra-class"><pre class="language-text"><code>    php artisan migrate:refresh
</code></pre></div><h2 id="agrendo-una-imagen-frontend"><a href="#agrendo-una-imagen-frontend" class="header-anchor">#</a> Agrendo una imagen (Frontend)</h2> <p>Creamos un nuevo controller para el input image</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>Controller
		name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">}</span>
		control<span class="token operator">=</span><span class="token punctuation">{</span>control<span class="token punctuation">}</span>
		render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token punctuation">{</span> onChange<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>Input
				type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span>
				onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">//creamos una función anonima y le pasamos el event</span>
					<span class="token function">submitImage</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">}</span>
				value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span>
				label<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		    <span class="token punctuation">)</span><span class="token punctuation">}</span>
	    <span class="token operator">/</span><span class="token operator">&gt;</span>	
    <span class="token comment">// Mostraremos la imagen seleccionada</span>
	<span class="token operator">&lt;</span>img id<span class="token operator">=</span><span class="token string">&quot;output&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li>Ya teniendo el input para agregar una imagen ahora realicemos la función para capturar en base64 ya que así está configurado en nuestro backend</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">//agregamos un const para almacenar la imagen seleccionada</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>imageselect<span class="token punctuation">,</span> setImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Esta es la funcion anonima que agregamos en el onchange</span>
	    <span class="token keyword">const</span> <span class="token function-variable function">submitImage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> files <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files
        <span class="token keyword">const</span> file <span class="token operator">=</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>

            <span class="token comment">//Mostrando imagen seleccionada</span>
            <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> output <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                output<span class="token punctuation">.</span>src <span class="token operator">=</span> reader<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//Guardando la imagen seleccionada en setImage</span>
        <span class="token keyword">const</span> <span class="token function-variable function">onLoad</span> <span class="token operator">=</span> <span class="token parameter">fileString</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setImage</span><span class="token punctuation">(</span>fileString<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//convirtiendo en Base64</span>
        <span class="token keyword">const</span> <span class="token function-variable function">getBase64</span> <span class="token operator">=</span> <span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
            reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">onLoad</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>Ahora en la función <code>onSubmit</code></p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">//En data estan todos lo datos que se enviaran</span>
    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//guardando en data.image la imagen seleccionada por el input</span>
		data<span class="token punctuation">.</span>image <span class="token operator">=</span> imageselect
        <span class="token comment">// Ahora creamos una nueva variable para separar los datos y saber que estamos enviando nos ayudara si más adelante crece el formulario</span>
		<span class="token keyword">var</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> slug<span class="token punctuation">,</span> body<span class="token punctuation">,</span> image  <span class="token punctuation">}</span> <span class="token operator">=</span> data
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'datos'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

		<span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NEXT_PUBLIC_BACKEND_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/       article</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token comment">//Enviando la cookie del usuario logeado para poder realizar validaciones antes de hacer un post nuevo</span>
					headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
				<span class="token comment">// router.push(&quot;/&quot;)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="agregando-validaciones"><a href="#agregando-validaciones" class="header-anchor">#</a> Agregando validaciones</h2> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// Ahora agregamos formState: { errors } </span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> handleSubmit<span class="token punctuation">,</span> control<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// En nuestro input </span>
    <span class="token operator">&lt;</span>Controller
		name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;slug&quot;</span><span class="token punctuation">}</span>
		control<span class="token operator">=</span><span class="token punctuation">{</span>control<span class="token punctuation">}</span>
        <span class="token comment">// Agregado</span>
		rules<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		 <span class="token punctuation">}</span><span class="token punctuation">}</span>
		render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> 
			field<span class="token operator">:</span> <span class="token punctuation">{</span> onChange<span class="token punctuation">,</span> value <span class="token punctuation">}</span><span class="token punctuation">,</span>
		 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>Input
				type<span class="token operator">=</span><span class="token string">&quot;slug&quot;</span>
				onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span>
				value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span>
				label<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;slug&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token comment">//Agregado</span>
	<span class="token punctuation">{</span>errors<span class="token punctuation">.</span>slug <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>This is required<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span>
</code></pre></div><p>Agregando valores definidos a los inputs</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> <span class="token punctuation">{</span> handleSubmit<span class="token punctuation">,</span> control<span class="token punctuation">,</span> formState<span class="token operator">:</span> <span class="token punctuation">{</span> errors <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>
		<span class="token punctuation">{</span>
			defaultValues<span class="token operator">:</span> <span class="token punctuation">{</span>
				title<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
				slug<span class="token operator">:</span> <span class="token string">''</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="realizando-post-update-delete-middleware-csrf"><a href="#realizando-post-update-delete-middleware-csrf" class="header-anchor">#</a> Realizando Post, Update, Delete Middleware CSRF</h2> <p>Para realizar algunas de estas opciones tenemos de tener en cuenta</p> <ul><li>1.- Sí estamos utilizando el <code>middlware = &quot;auth-sanctum&quot;</code> y las rutas están  dentro o fuera, al momento de realizar una petición desde el frontend tenemos que enviar la opción 'axios.defaults.withCredentials = true' en cada petición que realicemos porque nos puede enviar <code>419 (unknown status)</code></li></ul> <p>Para solucionar esto tenemos que agregar la siguiente línea <code>axios.defaults.withCredentials = true</code></p> <div class="language-js extra-class"><pre class="language-js"><code>	<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//agregado</span>
		axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span> file<span class="token operator">:</span> image<span class="token punctuation">,</span> title<span class="token punctuation">,</span> slug<span class="token punctuation">,</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> values<span class="token punctuation">;</span>
		<span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NEXT_PUBLIC_BACKEND_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/article</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> values<span class="token punctuation">,</span>
				<span class="token punctuation">{</span>headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Authorization&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Ahora sí podemos desactivar nuevamente la opción</p> <ul><li>Nos dirigimos al archivo <code>app/Http/Middleware/VerifyCsrfToken.php</code> para comentar nuevamente /api/*dentro de la $exceptmatriz. Debería verse algo como esto:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">protected</span> <span class="token variable">$except</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token comment">//'/api/*'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/roma-fullstack/fullstack-lanm/quinto-paso.html" class="prev">
        5.- Creando nuestro Frontend con Next Js
      </a></span> <span class="next"><a href="/roma-fullstack/fullstack-lanm/mostrar-articles.html">
        6.- Editando, Eliminando nuestro article
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/roma-fullstack/assets/js/app.597ac0ff.js" defer></script><script src="/roma-fullstack/assets/js/2.3f4652b3.js" defer></script><script src="/roma-fullstack/assets/js/19.1a37fc83.js" defer></script>
  </body>
</html>
